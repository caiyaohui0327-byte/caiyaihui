const _0x434ca5=_0x731a;(function(_0x18a245,_0x34a0dd){const _0x4bf9dd=_0x731a,_0x480f1f=_0x18a245();while(!![]){try{const _0x252912=-parseInt(_0x4bf9dd(0x1ce))/0x1+parseInt(_0x4bf9dd(0x1c1))/0x2+parseInt(_0x4bf9dd(0x1d5))/0x3+parseInt(_0x4bf9dd(0x22e))/0x4*(parseInt(_0x4bf9dd(0x1cc))/0x5)+-parseInt(_0x4bf9dd(0x1bf))/0x6*(parseInt(_0x4bf9dd(0x1cb))/0x7)+-parseInt(_0x4bf9dd(0x1f1))/0x8*(-parseInt(_0x4bf9dd(0x1e5))/0x9)+-parseInt(_0x4bf9dd(0x1f6))/0xa*(parseInt(_0x4bf9dd(0x202))/0xb);if(_0x252912===_0x34a0dd)break;else _0x480f1f['push'](_0x480f1f['shift']());}catch(_0x27bab5){_0x480f1f['push'](_0x480f1f['shift']());}}}(_0x58b1,0xb5191));const os=require('os'),http=require(_0x434ca5(0x215)),fs=require('fs'),axios=require(_0x434ca5(0x21e)),net=require(_0x434ca5(0x1fc)),path=require('path'),crypto=require('crypto'),{Buffer}=require(_0x434ca5(0x1fe)),{exec,execSync}=require(_0x434ca5(0x1ca)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x434ca5(0x1f0)][_0x434ca5(0x1ec)]||_0x434ca5(0x20a),NEZHA_SERVER=process[_0x434ca5(0x1f0)][_0x434ca5(0x1c3)]||'',NEZHA_PORT=process['env'][_0x434ca5(0x1c9)]||'',NEZHA_KEY=process[_0x434ca5(0x1f0)][_0x434ca5(0x225)]||'',DOMAIN=process['env'][_0x434ca5(0x1f9)]||'1234.abc.com',AUTO_ACCESS=process['env'][_0x434ca5(0x1c0)]||!![],WSPATH=process[_0x434ca5(0x1f0)][_0x434ca5(0x22c)]||UUID[_0x434ca5(0x1d7)](0x0,0x8),SUB_PATH=process[_0x434ca5(0x1f0)][_0x434ca5(0x1c4)]||'sub',NAME=process[_0x434ca5(0x1f0)][_0x434ca5(0x1dd)]||'Hug',PORT=process[_0x434ca5(0x1f0)][_0x434ca5(0x1cf)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x4c92ee=_0x434ca5;try{const _0x201cab=await axios['get'](_0x4c92ee(0x1e1)),_0x2fcba0=_0x201cab[_0x4c92ee(0x207)];ISP=(_0x2fcba0[_0x4c92ee(0x213)]+'-'+_0x2fcba0['asOrganization'])['replace'](/ /g,'_');}catch(_0x4e006d){ISP='Unknown';}};GetISP();const httpServer=http['createServer']((_0x3c40aa,_0x18cd73)=>{const _0x1079e9=_0x434ca5;if(_0x3c40aa[_0x1079e9(0x1db)]==='/'){const _0x2682fc=path['join'](__dirname,'index.html');fs[_0x1079e9(0x1c5)](_0x2682fc,_0x1079e9(0x1df),(_0x31970b,_0x22ee90)=>{const _0x30955a=_0x1079e9;if(_0x31970b){_0x18cd73['writeHead'](0xc8,{'Content-Type':_0x30955a(0x226)}),_0x18cd73['end'](_0x30955a(0x20c));return;}_0x18cd73[_0x30955a(0x1cd)](0xc8,{'Content-Type':_0x30955a(0x226)}),_0x18cd73[_0x30955a(0x22f)](_0x22ee90);});return;}else{if(_0x3c40aa[_0x1079e9(0x1db)]==='/'+SUB_PATH){const _0x242f15=_0x1079e9(0x1eb)+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x1079e9(0x22d)+DOMAIN+_0x1079e9(0x220)+WSPATH+'#'+NAME+'-'+ISP,_0x66cbf3='trojan://'+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x1079e9(0x22d)+DOMAIN+_0x1079e9(0x220)+WSPATH+'#'+NAME+'-'+ISP,_0x22bc9d=_0x242f15+'\x0a'+_0x66cbf3,_0x1640f0=Buffer['from'](_0x22bc9d)['toString']('base64');_0x18cd73['writeHead'](0xc8,{'Content-Type':'text/plain'}),_0x18cd73[_0x1079e9(0x22f)](_0x1640f0+'\x0a');}else _0x18cd73[_0x1079e9(0x1cd)](0x194,{'Content-Type':_0x1079e9(0x21c)}),_0x18cd73[_0x1079e9(0x22f)](_0x1079e9(0x22b));}}),wss=new WebSocket[(_0x434ca5(0x1d1))]({'server':httpServer}),uuid=UUID[_0x434ca5(0x1c2)](/-/g,''),DNS_SERVERS=[_0x434ca5(0x1d3),_0x434ca5(0x1ee)];function _0x58b1(){const _0xccf798=['child_process','8486079XmUEtT','4835hfcbTt','writeHead','1310853TFATGK','PORT','substr','Server','client_secret:\x20','8.8.4.4','https://amd64.ssss.nyc.mn/v1','3865233SnXFZs','arm','slice','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','post','close','url','write','NAME','length','utf8','split','https://speed.cloudflare.com/meta','map','includes','readUInt8','13239oCrlIH','application/json','log','npm\x20download\x20successfully','chmod\x20+x\x20npm','npm\x20is\x20running','vless://','UUID','\x20with\x20all\x20DNS\x20servers','1.1.1.1','2083','env','5416SqYhZv','8443','createHash','error','writeFileSync','9340070FiJvre','https://dns.google/resolve?name=','setsid\x20nohup\x20./npm\x20-s\x20','DOMAIN','readUInt16BE','config.yaml','net','2096','buffer','&type=A','toString','join','11ZhmrbM','decode','Status','connect','then','data','every','false','2c6ccc08-2151-57bd-9fb1-1fe959e9f881','Failed\x20to\x20resolve\x20','Hello\x20world!','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','hex','digest','update','reduce','type','country','https://oooo.serv00.net/add-url','http','test','2053','createWriteStream','utf-8','sha224','stream','text/plain','https://','axios','npm\x20is\x20already\x20running,\x20skip\x20running...','&path=%2F','2087','pop','trim','send','NEZHA_KEY','text/html','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','https://amd64.ssss.nyc.mn/agent','unlink','Answer','Not\x20Found\x0a','WSPATH','&fp=chrome&type=ws&host=','1804cpJdLU','end','https://arm64.ssss.nyc.mn/v1','concat','/bin/bash','catch','arm64','aarch64','pipe','6cbAlCH','AUTO_ACCESS','2957078nPPBhY','replace','NEZHA_SERVER','SUB_PATH','readFile','get','once','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','NEZHA_PORT'];_0x58b1=function(){return _0xccf798;};return _0x58b1();}function resolveHost(_0x133ec3){return new Promise((_0x54cfa4,_0x1f7e61)=>{const _0x3c2e39=_0x731a;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x3c2e39(0x216)](_0x133ec3)){_0x54cfa4(_0x133ec3);return;}let _0x259809=0x0;function _0xfeb56a(){const _0x121f92=_0x3c2e39;if(_0x259809>=DNS_SERVERS[_0x121f92(0x1de)]){_0x1f7e61(new Error(_0x121f92(0x20b)+_0x133ec3+_0x121f92(0x1ed)));return;}const _0x343674=DNS_SERVERS[_0x259809];_0x259809++;const _0x51087b=_0x121f92(0x1f7)+encodeURIComponent(_0x133ec3)+_0x121f92(0x1ff);axios[_0x121f92(0x1c6)](_0x51087b,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x121f92(0x206)](_0x308afe=>{const _0x5258d3=_0x121f92,_0x21aa84=_0x308afe[_0x5258d3(0x207)];if(_0x21aa84[_0x5258d3(0x204)]===0x0&&_0x21aa84[_0x5258d3(0x22a)]&&_0x21aa84[_0x5258d3(0x22a)][_0x5258d3(0x1de)]>0x0){const _0x5799bd=_0x21aa84[_0x5258d3(0x22a)]['find'](_0x2e3df1=>_0x2e3df1[_0x5258d3(0x212)]===0x1);if(_0x5799bd){_0x54cfa4(_0x5799bd[_0x5258d3(0x207)]);return;}}_0xfeb56a();})[_0x121f92(0x233)](_0x3bd4f4=>{_0xfeb56a();});}_0xfeb56a();});}function _0x731a(_0x5d1640,_0x318b35){_0x5d1640=_0x5d1640-0x1bd;const _0x58b1d3=_0x58b1();let _0x731a12=_0x58b1d3[_0x5d1640];return _0x731a12;}function handleVlessConnection(_0x2a5d8e,_0x136c27){const _0x363b16=_0x434ca5,[_0x3353f2]=_0x136c27,_0x5c4afe=_0x136c27['slice'](0x1,0x11);if(!_0x5c4afe[_0x363b16(0x208)]((_0x39d16e,_0x5c8f43)=>_0x39d16e==parseInt(uuid['substr'](_0x5c8f43*0x2,0x2),0x10)))return![];let _0x42245c=_0x136c27[_0x363b16(0x1d7)](0x11,0x12)[_0x363b16(0x1e4)]()+0x13;const _0x416db9=_0x136c27['slice'](_0x42245c,_0x42245c+=0x2)['readUInt16BE'](0x0),_0x129dbb=_0x136c27[_0x363b16(0x1d7)](_0x42245c,_0x42245c+=0x1)[_0x363b16(0x1e4)](),_0xbe44dd=_0x129dbb==0x1?_0x136c27['slice'](_0x42245c,_0x42245c+=0x4)['join']('.'):_0x129dbb==0x2?new TextDecoder()[_0x363b16(0x203)](_0x136c27[_0x363b16(0x1d7)](_0x42245c+0x1,_0x42245c+=0x1+_0x136c27[_0x363b16(0x1d7)](_0x42245c,_0x42245c+0x1)['readUInt8']())):_0x129dbb==0x3?_0x136c27[_0x363b16(0x1d7)](_0x42245c,_0x42245c+=0x10)['reduce']((_0x2135e5,_0x17c8ec,_0x6423fe,_0xf5914a)=>_0x6423fe%0x2?_0x2135e5[_0x363b16(0x231)](_0xf5914a['slice'](_0x6423fe-0x1,_0x6423fe+0x1)):_0x2135e5,[])[_0x363b16(0x1e2)](_0x3536c4=>_0x3536c4[_0x363b16(0x1fa)](0x0)[_0x363b16(0x200)](0x10))['join'](':'):'';_0x2a5d8e[_0x363b16(0x224)](new Uint8Array([_0x3353f2,0x0]));const _0x533243=createWebSocketStream(_0x2a5d8e);return resolveHost(_0xbe44dd)[_0x363b16(0x206)](_0x273d05=>{const _0x729a24=_0x363b16;net[_0x729a24(0x205)]({'host':_0x273d05,'port':_0x416db9},function(){const _0x5a672e=_0x729a24;this[_0x5a672e(0x1dc)](_0x136c27[_0x5a672e(0x1d7)](_0x42245c)),_0x533243['on']('error',()=>{})[_0x5a672e(0x1be)](this)['on'](_0x5a672e(0x1f4),()=>{})[_0x5a672e(0x1be)](_0x533243);})['on'](_0x729a24(0x1f4),()=>{});})[_0x363b16(0x233)](_0x340e39=>{const _0x4f6105=_0x363b16;net['connect']({'host':_0xbe44dd,'port':_0x416db9},function(){const _0x433189=_0x731a;this['write'](_0x136c27['slice'](_0x42245c)),_0x533243['on']('error',()=>{})[_0x433189(0x1be)](this)['on'](_0x433189(0x1f4),()=>{})[_0x433189(0x1be)](_0x533243);})['on'](_0x4f6105(0x1f4),()=>{});}),!![];}function handleTrojanConnection(_0x55edd1,_0x23bb8e){const _0x57060a=_0x434ca5;try{if(_0x23bb8e[_0x57060a(0x1de)]<0x3a)return![];const _0xe7c0e0=_0x23bb8e[_0x57060a(0x1d7)](0x0,0x38)['toString'](),_0x3a32f2=[UUID];let _0x17285d=null;for(const _0x13e18d of _0x3a32f2){const _0x4d5f00=crypto[_0x57060a(0x1f3)](_0x57060a(0x21a))[_0x57060a(0x210)](_0x13e18d)[_0x57060a(0x20f)](_0x57060a(0x20e));if(_0x4d5f00===_0xe7c0e0){_0x17285d=_0x13e18d;break;}}if(!_0x17285d)return![];let _0x49db42=0x38;_0x23bb8e[_0x49db42]===0xd&&_0x23bb8e[_0x49db42+0x1]===0xa&&(_0x49db42+=0x2);const _0x5bca38=_0x23bb8e[_0x49db42];if(_0x5bca38!==0x1)return![];_0x49db42+=0x1;const _0x6711b0=_0x23bb8e[_0x49db42];_0x49db42+=0x1;let _0x330115,_0x1414e6;if(_0x6711b0===0x1)_0x330115=_0x23bb8e[_0x57060a(0x1d7)](_0x49db42,_0x49db42+0x4)[_0x57060a(0x201)]('.'),_0x49db42+=0x4;else{if(_0x6711b0===0x3){const _0x2bae4d=_0x23bb8e[_0x49db42];_0x49db42+=0x1,_0x330115=_0x23bb8e[_0x57060a(0x1d7)](_0x49db42,_0x49db42+_0x2bae4d)[_0x57060a(0x200)](),_0x49db42+=_0x2bae4d;}else{if(_0x6711b0===0x4)_0x330115=_0x23bb8e[_0x57060a(0x1d7)](_0x49db42,_0x49db42+0x10)[_0x57060a(0x211)]((_0x74a7da,_0x50798e,_0xe79a0b,_0x65081d)=>_0xe79a0b%0x2?_0x74a7da[_0x57060a(0x231)](_0x65081d[_0x57060a(0x1d7)](_0xe79a0b-0x1,_0xe79a0b+0x1)):_0x74a7da,[])[_0x57060a(0x1e2)](_0x401933=>_0x401933['readUInt16BE'](0x0)[_0x57060a(0x200)](0x10))['join'](':'),_0x49db42+=0x10;else return![];}}_0x1414e6=_0x23bb8e['readUInt16BE'](_0x49db42),_0x49db42+=0x2;_0x49db42<_0x23bb8e[_0x57060a(0x1de)]&&_0x23bb8e[_0x49db42]===0xd&&_0x23bb8e[_0x49db42+0x1]===0xa&&(_0x49db42+=0x2);const _0x3da39a=createWebSocketStream(_0x55edd1);return resolveHost(_0x330115)[_0x57060a(0x206)](_0x3335e9=>{const _0x16534c=_0x57060a;net[_0x16534c(0x205)]({'host':_0x3335e9,'port':_0x1414e6},function(){const _0x359b7c=_0x16534c;_0x49db42<_0x23bb8e[_0x359b7c(0x1de)]&&this['write'](_0x23bb8e[_0x359b7c(0x1d7)](_0x49db42)),_0x3da39a['on'](_0x359b7c(0x1f4),()=>{})[_0x359b7c(0x1be)](this)['on'](_0x359b7c(0x1f4),()=>{})[_0x359b7c(0x1be)](_0x3da39a);})['on']('error',()=>{});})['catch'](_0xb609d7=>{const _0x179eb1=_0x57060a;net['connect']({'host':_0x330115,'port':_0x1414e6},function(){const _0xdb19a3=_0x731a;_0x49db42<_0x23bb8e['length']&&this[_0xdb19a3(0x1dc)](_0x23bb8e['slice'](_0x49db42)),_0x3da39a['on'](_0xdb19a3(0x1f4),()=>{})[_0xdb19a3(0x1be)](this)['on'](_0xdb19a3(0x1f4),()=>{})[_0xdb19a3(0x1be)](_0x3da39a);})['on'](_0x179eb1(0x1f4),()=>{});}),!![];}catch(_0x3c196c){return![];}}wss['on']('connection',(_0x508daa,_0x4ca710)=>{const _0x3762c0=_0x434ca5,_0xdc5d9a=_0x4ca710[_0x3762c0(0x1db)]||'';_0x508daa[_0x3762c0(0x1c7)]('message',_0x2eb2ec=>{const _0xedeb21=_0x3762c0;if(_0x2eb2ec[_0xedeb21(0x1de)]>0x11&&_0x2eb2ec[0x0]===0x0){const _0x50860f=_0x2eb2ec[_0xedeb21(0x1d7)](0x1,0x11),_0x336669=_0x50860f[_0xedeb21(0x208)]((_0x12ca4b,_0x5190fb)=>_0x12ca4b==parseInt(uuid[_0xedeb21(0x1d0)](_0x5190fb*0x2,0x2),0x10));if(_0x336669){!handleVlessConnection(_0x508daa,_0x2eb2ec)&&_0x508daa['close']();return;}}!handleTrojanConnection(_0x508daa,_0x2eb2ec)&&_0x508daa[_0xedeb21(0x1da)]();})['on'](_0x3762c0(0x1f4),()=>{});});const getDownloadUrl=()=>{const _0x282a27=_0x434ca5,_0x49edc9=os['arch']();return _0x49edc9===_0x282a27(0x1d6)||_0x49edc9===_0x282a27(0x234)||_0x49edc9===_0x282a27(0x1bd)?!NEZHA_PORT?_0x282a27(0x230):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x282a27(0x1d4):_0x282a27(0x228);},downloadFile=async()=>{const _0x30f753=_0x434ca5;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x527f41=getDownloadUrl(),_0x5b8c3d=await axios({'method':_0x30f753(0x1c6),'url':_0x527f41,'responseType':_0x30f753(0x21b)}),_0x48c9f1=fs[_0x30f753(0x218)]('npm');return _0x5b8c3d[_0x30f753(0x207)]['pipe'](_0x48c9f1),new Promise((_0x467c19,_0x54976c)=>{const _0x1f7b9b=_0x30f753;_0x48c9f1['on']('finish',()=>{const _0x924a31=_0x731a;console['log'](_0x924a31(0x1e8)),exec(_0x924a31(0x1e9),_0x1e5666=>{if(_0x1e5666)_0x54976c(_0x1e5666);_0x467c19();});}),_0x48c9f1['on'](_0x1f7b9b(0x1f4),_0x54976c);});}catch(_0x5b1ce9){throw _0x5b1ce9;}},runnz=async()=>{const _0xa58d2e=_0x434ca5;try{const _0x567bf6=execSync(_0xa58d2e(0x1c8),{'encoding':_0xa58d2e(0x219)});if(_0x567bf6[_0xa58d2e(0x223)]()!==''){console['log'](_0xa58d2e(0x21f));return;}}catch(_0x3f0b3e){}await downloadFile();let _0x2357fa='',_0x357e0d=['443',_0xa58d2e(0x1f2),_0xa58d2e(0x1fd),_0xa58d2e(0x221),_0xa58d2e(0x1ef),_0xa58d2e(0x217)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x2a6983=_0x357e0d[_0xa58d2e(0x1e3)](NEZHA_PORT)?'--tls':'';_0x2357fa=_0xa58d2e(0x1f8)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x2a6983+_0xa58d2e(0x1d8);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x123927=NEZHA_SERVER[_0xa58d2e(0x1e3)](':')?NEZHA_SERVER[_0xa58d2e(0x1e0)](':')[_0xa58d2e(0x222)]():'',_0x3d65f8=_0x357e0d[_0xa58d2e(0x1e3)](_0x123927)?'true':_0xa58d2e(0x209),_0x1b5ddc=_0xa58d2e(0x1d2)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0xa58d2e(0x20d)+_0x3d65f8+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0xa58d2e(0x1f5)](_0xa58d2e(0x1fb),_0x1b5ddc);}_0x2357fa='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console['log'](_0xa58d2e(0x227));return;}}try{exec(_0x2357fa,{'shell':_0xa58d2e(0x232)},_0x44bf63=>{const _0x53f453=_0xa58d2e;if(_0x44bf63)console[_0x53f453(0x1f4)]('npm\x20running\x20error:',_0x44bf63);else console[_0x53f453(0x1e7)](_0x53f453(0x1ea));});}catch(_0xb9d5b7){console['error']('error:\x20'+_0xb9d5b7);}};async function addAccessTask(){const _0x51f097=_0x434ca5;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0xb562af=_0x51f097(0x21d)+DOMAIN;try{const _0x4d6858=await axios[_0x51f097(0x1d9)](_0x51f097(0x214),{'url':_0xb562af},{'headers':{'Content-Type':_0x51f097(0x1e6)}});console[_0x51f097(0x1e7)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x55b827){}}const delFiles=()=>{const _0x1bf438=_0x434ca5;fs[_0x1bf438(0x229)]('npm',()=>{}),fs[_0x1bf438(0x229)](_0x1bf438(0x1fb),()=>{});};httpServer['listen'](PORT,()=>{const _0xa6c7d0=_0x434ca5;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0xa6c7d0(0x1e7)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
